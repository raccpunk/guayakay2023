<c-card>
    <c-card-header>
        <c-row class="justify-content-end">
            <c-col lg="10">
                Producción
            </c-col>
            <c-col lg="2">

            </c-col>
        </c-row>
        <select class="form-select" [formControl]="idmaquinas" (change)="obtenerMaquinaEntrada()">
            <option selected value="0">Selecciona una maquina</option>
            <option *ngFor="let maquina of lista_maquinas;" value="{{maquina.idmaquina}}">{{maquina.tblMaquina.nombre}}
            </option>
        </select>
    </c-card-header>
    <c-card-body>
        <table id="datatable-produccion" datatable class="table table-striped table-hover">
            <thead>
                <tr>
                    <th>Folio</th>
                    <th>Estado</th>
                    <th>Cliente</th>
                    <th>Bordado</th>
                    <th>Fecha</th>


                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let Produccion of lista_entradas;let i = index"
                    [ngClass]="{'resaltado': Produccion.tblEntrada.estado == 'En Pausa', 'resaltado2': Produccion.tblEntrada.estado == 'En Proceso','resaltado3': Produccion.tblEntrada.estado == 'Espera'}">
                    <td>{{Produccion.identrada}} <br> {{Produccion.icon}}
                        <!-- <i class="texto-borde"
                            *ngif="Produccion.icon"><span>
                                <h1>&#33;</h1>
                            </span></i> -->
                    </td>
                    
                    <td>{{Produccion.tblEntrada.estado}}</td>
                    <td>{{Produccion.tblEntrada.tblCliente.nombre}}</td>
                    <td>{{Produccion.tblEntrada.tblBordado.nombre}}</td>
                    <td>{{Produccion.createdAt | date:'dd/MM/yy'}}</td>

                    <td>
                        <a (click)="getArray(i)"><button [cModalToggle]="staticBackdropModal.id"
                                cButton>Ver</button></a>
                    </td>
                </tr>
            </tbody>
        </table>

    </c-card-body>
</c-card>


<c-modal class="modal-xl" #staticBackdropModal data-backdrop="static" id="staticBackdropModal">
    <!-- <form (ngSubmit)="onSubmit()" [formGroup]="MaquinasForm"> -->
    <c-modal-header>
        <img class="img" src="assets/lotto/LOGOCOMPAQ.png">
        <h4 style="font-weight: bold;" cModalTitle>PRODUCCIÓN</h4>
        <button [cModalToggle]="staticBackdropModal.id" cButtonClose #button_close_detalles></button>
    </c-modal-header>
    <c-modal-body style="background-color: black;">


        <c-row>
            <div class="col-md-4">
                <h5 style="color: white; font-weight: bold;">{{this.nombre}} </h5>
            </div>
            <div class="col-md-4">
                <th>
                    <h5 style=" font-weight: bold; color: white;">N. PUNTADAS:
                    </h5>
                <th>
                    <h6 style="color: white;">{{this.puntadas}}</h6>
            </div>
            <div class="col-md-4">
                <th>
                    <h5 style=" font-weight: bold; color: white;">FOLIO:
                    </h5>
                <th>
                    <h6 style="color: white; ">{{this.identrada}}</h6>
            </div>
        </c-row>

        <div class="col"></div>
        <h5 style="color: white;  text-transform: uppercase; font-weight: bold;">{{this.estado}}
        </h5>

    </c-modal-body>
    <c-modal-body>
        <div class="container text-center">
            <div class="row align-items-start">
                <div class="col">
                    <!-- <th>Asignar a una maquina:</th>
                    <select class="form-select" [formControl]="idmaquina" (change)="AsignarMaquina()">
                        <option selected value="0">Selecciona una maquina</option>
                        <option *ngFor="let maquina of lista_maquinas;" value="{{maquina.idmaquina}}">{{maquina.nombre}}
                        </option>
                    </select> -->
                    <div *ngIf="this.errormensaje" style="color: red;">{{mensaje_error}}</div>
                    <tr>
                        <th>
                            <h5 style=" font-weight: bold;">NOMBRE BORDADO:</h5>
                        </th>
                        <td>
                            <h6>{{this.nombreBordado}}</h6>
                        </td>
                    </tr>
                    <p></p>
                    <h5>
                        <th>
                            <h5 style=" font-weight: bold;">SECUENCIA:</h5>
                        </th>
                    </h5>
                    <tr style="text-align: left !important;" *ngFor="let hilo of hilosA;">

                        <td>{{hilo.orden}} - {{hilo.hilo}}</td>

                    </tr>
                    <p></p>
                    <tr>
                        <th>
                            <h5 style=" font-weight: bold;">ALTO:</h5>
                        </th>
                        <td>
                            <h6>{{this.alto}}</h6>
                        </td>

                        <th>
                            <h5 style=" font-weight: bold;"> ANCHO:</h5>
                        </th>
                        <td>
                            <h6>{{this.ancho}}</h6>
                        </td>
                    </tr>

                    <p></p>
                    <tr>
                        <th>
                            <h5 style=" font-weight: bold;">ARO:</h5>
                        </th>
                        <td>
                            <h5>{{this.cabezal}}</h5>
                        </td>
                    </tr>
                    <p></p>
                    <tr>
                        <th>
                            <h5 style=" font-weight: bold;">PRENDA:</h5>
                        </th>
                        <td>
                            <h6>{{this.prenda}}</h6>
                        </td>
                    </tr>

                    <p></p>
                    <tr>
                        <th>
                            <h5 style=" font-weight: bold;">TOTAL PIEZAS:</h5>
                        </th>
                        <td>
                            <h6>{{this.numero}}</h6>
                        </td>
                    </tr>
                    <p></p>
                    <tr>
                        <th>
                            <h5 style=" font-weight: bold;">PIEZAS REALIZADAS:</h5>
                        </th>
                        <td>
                            <h6>{{this.realizadas}}</h6>
                        </td>
                    </tr>
                    <p></p>
                    <tr>
                        <th>
                            <h5 style=" font-weight: bold;">PIEZAS FALTANTES:</h5>
                        </th>
                        <td>
                            <h6>{{this.faltantes}}</h6>
                        </td>
                    </tr>
                    <p></p>

                    <tr>
                        <th>
                            <h5 style=" font-weight: bold;">TIEMPO POR PIEZA:</h5>
                        </th>
                        <td>
                            <h6>{{this.minutos1}} minutos</h6>
                        </td>
                    </tr>
                    <p></p>
                    <tr>
                        <th>
                            <h5 style=" font-weight: bold;">Tiempo Promedio de Producción:</h5>


                            <h6>{{this.horas}} horas {{this.minutos}} min {{this.resto}} seg</h6>



                            <p></p>
                    <tr>
                        <p></p>
                    <tr>
                        <th>
                            <h5 style=" font-weight: bold;">OBSERVACIONES:</h5>
                        </th>
                        <td>
                            <h6>{{this.observacion}}</h6>
                        </td>
                    </tr>

                    <p></p>







                    <p></p>
                    <tr>
                        <th>
                            <h5 style=" font-weight: bold;">DETALLES DEL BORDADO:</h5>
                        </th>
                        <td>
                            <h6>{{this.observacionB}}</h6>
                        </td>

                    </tr>
                </div>
               
                    <ngx-gallery *ngIf="galeriaAbierta" [options]="galleryOptions" [images]="galleryImages"></ngx-gallery>

                
                <p></p>
           

            </div>
        </div>

    </c-modal-body>
    <c-modal-footer>

        <button *ngIf=" this.estado == 'En Pausa'" [cModalToggle]="staticBackdropModal3.id" (click)="Produccion();"
            cButton color="primary" disabled="{{this.variable5}}">&#9658;
            EN PROCESO</button>

        <button *ngIf=" this.estado == 'En Proceso'" 
            [cModalToggle]="staticBackdropModal4.id" cButton color="primary">
            &#10074; &#10074; PAUSAR</button>
        <button *ngIf=" this.estado == 'Espera'" (click)="Produccion()" cButton color="primary"
            disabled="{{this.variable5}}">
            &#9658; Iniciar Producción</button>
        <!-- <div *ngIf="this.proceso == 'En Proceso'">NO SE PUEDE AGREGAR OTRO PROCESO EN ESTA MÁQUINA</div> -->
        <button [cModalToggle]="staticBackdropModal5.id"  [disabled]="this.estado == 'Espera' || this.estado == 'En Pausa'" cButton
            color="secondary">FINALIZAR</button>



    </c-modal-footer>
    <!-- </form> -->
    <!-- </form> -->
</c-modal>


<c-modal alignment="center" backdrop='static' #staticBackdropModal3 id="staticBackdropModal3">

    <c-modal-header>
        <img class="img" src="assets/lotto/LOGOCOMPAQ.png">
        <h4 style="font-weight: bold;" cModalTitle>ACTUALIZADO</h4>

        <button cButtonClose [cModalToggle]="staticBackdropModal.id"></button>
    </c-modal-header>

    <c-modal-footer>

        <button cButton [cModalToggle]="staticBackdropModal.id" color="secondary">ACEPTAR</button>
    </c-modal-footer>

</c-modal>

<c-modal alignment="center" backdrop='static' #staticBackdropModal4 id="staticBackdropModal4">

    <c-modal-header>
        <img class="img" src="assets/lotto/LOGOCOMPAQ.png">

        <h4 style="font-weight: bold;" cModalTitle>Ingrese la cantidad de realizadas</h4>


     



    </c-modal-header>
    <c-modal-body>
        <input type="number" class="form-control" [formControl]="cantidad" (change)="desactivarpausa()"
        placeholder="CANTIDAD " pattern="/^[0-9]+$/">
    <div *ngIf="this.variable" style="color: red;">por favor introduzca un Numero menor
        al total de piezas realizadas</div>
    <div *ngIf="this.variable4" style="color: red;">por favor Finalice la entrada</div>

    </c-modal-body>

    <c-modal-footer>
        <button cButton [cModalToggle]="staticBackdropModal.id" color="secondary">cancelar</button>
        <button cButton [cModalToggle]="staticBackdropModal.id" color="secondary" (click)="pausa()" disabled="{{this.variable3}}">ACEPTAR</button>
        <button *ngIf=" this.variable4" (click)="finalizar()" disabled="{{this.variable}}" cButton
        color="secondary">FINALIZAR</button>

    </c-modal-footer>

</c-modal>


<c-modal alignment="center" backdrop='static' #staticBackdropModal5 id="staticBackdropModal5">

    <c-modal-header>

       
        <h4  style="font-weight: bold;" cModalTitle>Esta seguro que desea finalizar una vez realizado esto ya no se podran realizar cambios</h4>


     



    </c-modal-header>
  

    <c-modal-footer>
        <button cButton [cModalToggle]="staticBackdropModal.id" color="secondary">cancelar</button>
        <button cButton [cModalToggle]="staticBackdropModal.id" color="secondary" (click)="finalizar()" >ACEPTAR</button>
      

    </c-modal-footer>

</c-modal>


